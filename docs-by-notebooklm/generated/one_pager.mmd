%%{init: {'theme': 'default', 'themeVariables': {'fontSize': '14px'}}}%%
flowchart TB
    subgraph Title["Notes Dashboard"]
        direction TB
        T["Hierarchical Note-Taking App"]
    end

    subgraph Features["Features"]
        direction TB
        F1["Nested pages"]
        F2["Rich text editor"]
        F3["Drag-and-drop tree"]
        F4["Image uploads"]
        F5["Dark/light mode"]
    end

    subgraph Stack["Tech Stack"]
        direction TB
        subgraph FE["Frontend"]
            S1["Next.js 15"]
            S2["TipTap"]
            S3["dnd-kit"]
            S4["Tailwind"]
        end
        subgraph BE["Backend"]
            S5["FastAPI"]
            S6["SQLAlchemy"]
            S7["PostgreSQL"]
        end
    end

    subgraph Governance["Governance"]
        direction TB
        G1["Zero-indexed positions"]
        G2["35/30/35 drop zones"]
        G3["Circular ref block"]
        G4["ruff + mypy + pytest"]
    end

    T --- Features
    T --- Stack
    T --- Governance

    classDef title fill:#111827,stroke:#111827,color:#fff,stroke-width:2px
    classDef feature fill:#DBEAFE,stroke:#3B82F6,stroke-width:2px
    classDef fe fill:#D1FAE5,stroke:#10B981,stroke-width:2px
    classDef be fill:#E9D5FF,stroke:#8B5CF6,stroke-width:2px
    classDef gov fill:#FEF3C7,stroke:#F59E0B,stroke-width:2px

    class T title
    class F1,F2,F3,F4,F5 feature
    class S1,S2,S3,S4 fe
    class S5,S6,S7 be
    class G1,G2,G3,G4 gov
